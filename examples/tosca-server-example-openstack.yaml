node_templates:
  server_kube_master_server:
    type:  openstack.nodes.Server
    properties:
      name:  server_kube_master
      meta:
        - cube_master=true
    requirements:
      - nics:  server_kube_master_port
      - nics:
          node_filter:
            properties:
              name:  test-two-routers
      - flavor:
          node_filter:
            properties:
              vcpus:  1
      - security_groups:  server_kube_master_securitygroup
      - image:
          node_filter:
            properties:
              name:  "Ubuntu  16.04  Xenial  Trusty  x86_64  cloud  image"


  server_kube_master_port:
    type:  openstack.nodes.Port
    properties:
      fixed_ips:
        - "test-two-routers":  192.168.12.25
      name:  server_kube_master_port_0


  server_kube_master_floatingip:
    type:  openstack.nodes.FloatingIp
    attributes:
      floating_ip_address:  10.100.115.15
    requirements:
      - network:
          node_filter:
            properties:
              name:  ispras
      - server:  server_kube_master_server


  server_kube_master_securitygrouprule:
    type:  openstack.nodes.SecurityGroupRule
    attributes:
      protocol:  tcp
      port_range_min:  1000
      port_range_max:  1000
      remote_ip_prefix:  0.0.0.0
    requirements:
      - security_group:  server_kube_master_securitygroup


  server_kube_master_securitygroup:
    type:  openstack.nodes.SecurityGroup
    properties:
      name:  server_kube_master_securitygroup
